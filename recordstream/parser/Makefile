.PHONY: help ## Print this help
help:
	@grep -E '^\.PHONY: [a-zA-Z_-]+ .*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = "(: |##)"}; {printf "\033[36m%-30s\033[0m %s\n", $$2, $$3}'

.PHONY: init ## Initialize for development
init:
	poetry config virtualenvs.in-project true
	@poetry install

.PHONY: lint ## Lint
lint:
	poetry run pre-commit run --all-files

.PHONY: test ## Run tests - DeprecationWarning ignored as they're caused by autogenerated protobuf files
test:
	poetry run pytest --cov=hedera --no-cov-on-fail  -W ignore::DeprecationWarning

.PHONY: coverage ## Run tests and produce coverage html report
coverage:
	poetry run pytest --cov=hedera --cov-report=html  -W ignore::DeprecationWarning

check: lint test
